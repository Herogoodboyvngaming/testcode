<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Há»c Tiáº¿ng Anh CÃ¹ng ChÃ­ Dá»± ğŸ‡»ğŸ‡³</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ‡»ğŸ‡³ Há»c Tiáº¿ng Anh CÃ¹ng ChÃ­ Dá»± ğŸ‡»ğŸ‡³</h1>
            <p class="clock">ğŸ•’ Thá»i gian hiá»‡n táº¡i: <span id="clock">--:--:--</span></p>
            <p class="user-info">ChÃ o: <strong id="username-display">KhÃ¡ch</strong> | <button id="logout-btn" class="small-btn hidden">ÄÄƒng Xuáº¥t</button></p>
            <p class="subtitle">ChÆ¡i vui nha, cÃ³ gÃ³p Ã½ thÃ¬ báº¥m nÃºt bÃªn dÆ°á»›i nhÃ©! â¤ï¸</p>
        </header>

        <div class="controls">
            <button id="auth-btn">ğŸ” ÄÄƒng Nháº­p / ÄÄƒng KÃ½</button>
            <button id="lang-learn-btn">ğŸ“š Äá»•i NgÃ´n Ngá»¯ Há»c</button>
            <button id="lang-btn">ğŸŒ NgÃ´n Ngá»¯ PhÃ¡t Ã‚m</button>
            <button id="mode-btn">âš¡ Mode: Dá»…</button>
            <button id="shop-btn">ğŸ›’ Shop Quá»‘c Ká»³</button>
            <button id="status-btn">â„¹ï¸ ThÃ´ng Tin</button>
        </div>

        <div id="status-info" class="info-box hidden">
            <h3>â„¹ï¸ ThÃ´ng Tin & Update</h3>
            <p><strong>PhiÃªn báº£n:</strong> CÃ³ ÄÄƒng Nháº­p Báº¯t Buá»™c (06/01/2026)</p>
            <p><strong>TÃ¡c giáº£:</strong> Nguyá»…n ChÃ­ Dá»± ğŸ‡»ğŸ‡³ (OWNER)</p>
            <p><strong>Gmail há»— trá»£:</strong> Herogoodboymc2024@gmail.com</p>
            <p>Pháº£i Ä‘Äƒng nháº­p má»›i Ä‘Æ°á»£c há»c nha!</p>
        </div>

        <div id="start-screen">
            <div class="welcome-box">
                <h2>ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i Quiz Há»c Tiáº¿ng Anh! ğŸ‰</h2>
                <p>Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? Báº¥m báº¯t Ä‘áº§u nha!</p>
                <p>Äiá»ƒm hiá»‡n táº¡i: <strong id="current-score">0</strong></p>
                <button id="start-btn" class="big-btn">Báº¯t Äáº§u Há»c ğŸ“š</button>
            </div>
        </div>

        <div id="quiz-screen" class="hidden">
            <p id="question"></p>
            <button id="speak-btn">ğŸ”Š Nghe PhÃ¡t Ã‚m</button>
            <div id="options"></div>

            <div class="quiz-controls">
                <button id="skip-btn">â­ï¸ Skip (-30Ä‘)</button>
                <button id="restart-btn">ğŸ”„ ChÆ¡i Láº¡i</button>
                <button id="reset-score-btn">ğŸ—‘ï¸ Reset Äiá»ƒm</button>
                <button id="quit-btn">âœ–ï¸ Tá»« Bá» (-10Ä‘)</button>
                <button id="back-menu-btn">ğŸ  Trá»Ÿ Vá» Menu ChÃ­nh</button>
            </div>

            <div id="result"></div>
            <p id="score">Äiá»ƒm: 0</p>
        </div>

        <div id="shop-screen" class="hidden">
            <h2>ğŸ›’ Shop Quá»‘c Ká»³ Ná»n</h2>
            <p>Äiá»ƒm hiá»‡n táº¡i: <strong id="shop-score">0</strong></p>
            <div class="shop-items">
                <div class="shop-item" data-country="vn" data-price="0">ğŸ‡»ğŸ‡³ Viá»‡t Nam - Miá»…n phÃ­</div>
                <div class="shop-item" data-country="us" data-price="100">ğŸ‡ºğŸ‡¸ Má»¹ - 100 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="gb" data-price="120">ğŸ‡¬ğŸ‡§ Anh - 120 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="jp" data-price="150">ğŸ‡¯ğŸ‡µ Nháº­t - 150 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="kr" data-price="200">ğŸ‡°ğŸ‡· HÃ n - 200 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="fr" data-price="250">ğŸ‡«ğŸ‡· PhÃ¡p - 250 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="de" data-price="180">ğŸ‡©ğŸ‡ª Äá»©c - 180 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="it" data-price="220">ğŸ‡®ğŸ‡¹ Ã - 220 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="cn" data-price="300">ğŸ‡¨ğŸ‡³ Trung Quá»‘c - 300 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="es" data-price="280">ğŸ‡ªğŸ‡¸ TÃ¢y Ban Nha - 280 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="ru" data-price="350">ğŸ‡·ğŸ‡º Nga - 350 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="th" data-price="400">ğŸ‡¹ğŸ‡­ ThÃ¡i Lan - 400 Ä‘iá»ƒm</div>
                <div class="shop-item" data-country="id" data-price="320">ğŸ‡®ğŸ‡© Indonesia - 320 Ä‘iá»ƒm</div>
            </div>
            <button id="back-shop" class="big-btn">Quay Láº¡i</button>
        </div>

        <footer>
            <p>Made in VN ğŸ‡»ğŸ‡³â™¥ï¸</p>
            <p>Made by: <strong>Nguyá»…n ChÃ­ Dá»±</strong> (OWNER)</p>

            <div class="footer-buttons">
                <button id="report-btn">ğŸ› Report Bug</button>
                <button id="suggest-btn">ğŸ’¡ Gá»£i Ã ThÃªm Tá»« Há»c</button>
            </div>
        </footer>
    </div>

    <!-- Modal ÄÄƒng Nháº­p / ÄÄƒng KÃ½ -->
    <div id="auth-modal" class="modal hidden">
        <div class="modal-content">
            <h3>ğŸ” ÄÄƒng Nháº­p / ÄÄƒng KÃ½</h3>
            <input type="text" id="auth-username" placeholder="TÃªn Ä‘Äƒng nháº­p">
            <input type="password" id="auth-password" placeholder="Máº­t kháº©u">
            <button id="login-btn" class="big-btn">ÄÄƒng Nháº­p</button>
            <button id="register-btn" class="big-btn">ÄÄƒng KÃ½</button>
            <button id="close-auth" class="close-btn">ÄÃ³ng</button>
        </div>
    </div>

    <!-- Modal NgÃ´n Ngá»¯ Há»c -->
    <div id="lang-learn-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Chá»n NgÃ´n Ngá»¯ Há»c</h3>
            <button data-learn-lang="en" data-country="us">ğŸ‡¬ğŸ‡§ Tiáº¿ng Anh</button>
            <button data-learn-lang="ja" data-country="jp">ğŸ‡¯ğŸ‡µ Tiáº¿ng Nháº­t</button>
            <button data-learn-lang="ko" data-country="kr">ğŸ‡°ğŸ‡· Tiáº¿ng HÃ n</button>
            <button data-learn-lang="fr" data-country="fr">ğŸ‡«ğŸ‡· Tiáº¿ng PhÃ¡p</button>
            <button data-learn-lang="de" data-country="de">ğŸ‡©ğŸ‡ª Tiáº¿ng Äá»©c</button>
            <button data-learn-lang="it" data-country="it">ğŸ‡®ğŸ‡¹ Tiáº¿ng Ã</button>
            <button data-learn-lang="zh" data-country="cn">ğŸ‡¨ğŸ‡³ Tiáº¿ng Trung</button>
            <button data-learn-lang="es" data-country="es">ğŸ‡ªğŸ‡¸ Tiáº¿ng TÃ¢y Ban Nha</button>
            <button data-learn-lang="ru" data-country="ru">ğŸ‡·ğŸ‡º Tiáº¿ng Nga</button>
            <button data-learn-lang="th" data-country="th">ğŸ‡¹ğŸ‡­ Tiáº¿ng ThÃ¡i</button>
            <button data-learn-lang="id" data-country="id">ğŸ‡®ğŸ‡© Tiáº¿ng Indonesia</button>
            <button data-learn-lang="vi" data-country="vn">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t (dá»‹ch nghÄ©a)</button>
            <button id="close-learn-lang" class="close-btn">ÄÃ³ng</button>
        </div>
    </div>

    <!-- Modal NgÃ´n Ngá»¯ PhÃ¡t Ã‚m -->
    <div id="lang-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Chá»n NgÃ´n Ngá»¯ PhÃ¡t Ã‚m</h3>
            <button data-lang="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</button>
            <button data-lang="en">ğŸ‡¬ğŸ‡§ English</button>
            <button data-lang="ja">ğŸ‡¯ğŸ‡µ Tiáº¿ng Nháº­t</button>
            <button data-lang="ko">ğŸ‡°ğŸ‡· Tiáº¿ng HÃ n</button>
            <button data-lang="fr">ğŸ‡«ğŸ‡· Tiáº¿ng PhÃ¡p</button>
            <button data-lang="zh">ğŸ‡¨ğŸ‡³ Tiáº¿ng Trung</button>
            <button data-lang="es">ğŸ‡ªğŸ‡¸ Tiáº¿ng TÃ¢y Ban Nha</button>
            <button data-lang="de">ğŸ‡©ğŸ‡ª Tiáº¿ng Äá»©c</button>
            <button data-lang="it">ğŸ‡®ğŸ‡¹ Tiáº¿ng Ã</button>
            <button data-lang="ru">ğŸ‡·ğŸ‡º Tiáº¿ng Nga</button>
            <button data-lang="th">ğŸ‡¹ğŸ‡­ Tiáº¿ng ThÃ¡i</button>
            <button data-lang="id">ğŸ‡®ğŸ‡© Tiáº¿ng Indonesia</button>
            <button id="close-lang" class="close-btn">ÄÃ³ng</button>
        </div>
    </div>

    <!-- Form Report Bug -->
    <div id="report-form" class="modal hidden">
        <div class="modal-content">
            <h3>ğŸ› BÃ¡o CÃ¡o Lá»—i</h3>
            <input type="email" id="report-email" placeholder="Gmail cá»§a báº¡n (báº¯t buá»™c)">
            <textarea id="report-message" placeholder="MÃ´ táº£ lá»—i chi tiáº¿t (báº¯t buá»™c)"></textarea>
            <button id="send-report" class="big-btn">Gá»­i BÃ¡o CÃ¡o</button>
            <button id="cancel-report" class="close-btn">Há»§y</button>
        </div>
    </div>

    <!-- Form Gá»£i Ã -->
    <div id="suggest-form" class="modal hidden">
        <div class="modal-content">
            <h3>ğŸ’¡ Gá»£i Ã ThÃªm Tá»« Há»c</h3>
            <input type="email" id="suggest-email" placeholder="Gmail cá»§a báº¡n (báº¯t buá»™c)">
            <textarea id="suggest-word" placeholder="Tá»«/cÃ¢u muá»‘n thÃªm (báº¯t buá»™c)"></textarea>
            <button id="send-suggest" class="big-btn">Gá»­i Gá»£i Ã</button>
            <button id="cancel-suggest" class="close-btn">Há»§y</button>
        </div>
    </div>

    <script>
        window.onload = function() {
            let currentLang = 'vi';
            let currentLearnLang = 'en';
            let currentMode = 'easy';
            let score = 0;
            let currentQuestion = 0;
            let unlockedFlags = ['vn'];
            let isLoggedIn = false;
            let currentUser = null;

            const modes = {
                easy: { name: "Dá»…", bonus: 10 },
                normal: { name: "BÃ¬nh ThÆ°á»ng", bonus: 15 },
                hard: { name: "KhÃ³", bonus: 30 },
                superhard: { name: "SiÃªu KhÃ³", bonus: 100 },
                extreme: { name: "Cá»±c KhÃ³", bonus: 500 }
            };

            const timezones = {
                vn: 'Asia/Ho_Chi_Minh',
                us: 'America/New_York',
                gb: 'Europe/London',
                jp: 'Asia/Tokyo',
                kr: 'Asia/Seoul',
                fr: 'Europe/Paris',
                de: 'Europe/Berlin',
                it: 'Europe/Rome',
                cn: 'Asia/Shanghai',
                es: 'Europe/Madrid',
                ru: 'Europe/Moscow',
                th: 'Asia/Bangkok',
                id: 'Asia/Jakarta'
            };
            let currentTimezone = timezones.vn;

            const ttsLangs = {
                vi: 'vi-VN',
                en: 'en-US',
                ja: 'ja-JP',
                ko: 'ko-KR',
                fr: 'fr-FR',
                zh: 'zh-CN',
                es: 'es-ES',
                de: 'de-DE',
                it: 'it-IT',
                ru: 'ru-RU',
                th: 'th-TH',
                id: 'id-ID'
            };

            const questionSets = {
                en: {
                    easy: [
                        { q: "Hello nghÄ©a lÃ  gÃ¬?", options: ["Táº¡m biá»‡t", "Xin chÃ o", "Cáº£m Æ¡n", "Xin lá»—i"], a: 1 },
                        { q: "Apple lÃ  quáº£ gÃ¬?", options: ["Cam", "Chuá»‘i", "TÃ¡o", "XoÃ i"], a: 2 },
                        { q: "Dog lÃ  con gÃ¬?", options: ["MÃ¨o", "ChÃ³", "GÃ ", "Vá»‹t"], a: 1 },
                        { q: "Thank you nghÄ©a lÃ ?", options: ["Xin chÃ o", "Táº¡m biá»‡t", "Cáº£m Æ¡n", "LÃ m Æ¡n"], a: 2 },
                        { q: "Water lÃ  gÃ¬?", options: ["Sá»¯a", "NÆ°á»›c", "CÃ  phÃª", "TrÃ "], a: 1 },
                        { q: "Book lÃ  gÃ¬?", options: ["BÃºt", "SÃ¡ch", "BÃ n", "Gháº¿"], a: 1 },
                        { q: "Sun lÃ  máº·t gÃ¬?", options: ["TrÄƒng", "Máº·t trá»i", "Sao", "MÃ¢y"], a: 1 },
                        { q: "Good morning nghÄ©a lÃ ?", options: ["ChÃ o buá»•i tá»‘i", "ChÃ o buá»•i sÃ¡ng", "ChÃ o buá»•i trÆ°a", "Táº¡m biá»‡t"], a: 1 },
                        { q: "Family nghÄ©a lÃ ?", options: ["Báº¡n bÃ¨", "Gia Ä‘Ã¬nh", "TrÆ°á»ng há»c", "CÃ´ng viá»‡c"], a: 1 },
                        { q: "Happy nghÄ©a lÃ ?", options: ["Buá»“n", "Vui váº»", "Giáº­n", "Sá»£"], a: 1 },
                        { q: "Good bye nghÄ©a lÃ ?", options: ["Xin chÃ o", "Táº¡m biá»‡t", "Cáº£m Æ¡n", "Xin lá»—i"], a: 1 },
                        { q: "Sorry nghÄ©a lÃ ?", options: ["Cáº£m Æ¡n", "Xin lá»—i", "Xin chÃ o", "Táº¡m biá»‡t"], a: 1 },
                        { q: "Please nghÄ©a lÃ ?", options: ["Xin lá»—i", "LÃ m Æ¡n", "Cáº£m Æ¡n", "Xin chÃ o"], a: 1 },
                        { q: "Cat lÃ  con gÃ¬?", options: ["ChÃ³", "MÃ¨o", "GÃ ", "Vá»‹t"], a: 1 },
                        { q: "Banana lÃ  quáº£ gÃ¬?", options: ["TÃ¡o", "Chuá»‘i", "Cam", "XoÃ i"], a: 1 }
                    ],
                    normal: [
                        { q: "Capital of France is?", options: ["London", "Berlin", "Paris", "Madrid"], a: 2 },
                        { q: "Yesterday nghÄ©a lÃ ?", options: ["HÃ´m qua", "HÃ´m nay", "NgÃ y mai", "Tuáº§n tá»›i"], a: 0 },
                        { q: "Beautiful nghÄ©a lÃ ?", options: ["Xáº¥u xÃ­", "Äáº¹p", "To", "Nhá»"], a: 1 },
                        { q: "Big nghÄ©a lÃ ?", options: ["Nhá»", "To", "DÃ i", "Ngáº¯n"], a: 1 },
                        { q: "Small nghÄ©a lÃ ?", options: ["To", "Nhá»", "DÃ i", "Ngáº¯n"], a: 1 },
                        { q: "Long nghÄ©a lÃ ?", options: ["Ngáº¯n", "DÃ i", "To", "Nhá»"], a: 1 },
                        { q: "Short nghÄ©a lÃ ?", options: ["DÃ i", "Ngáº¯n", "To", "Nhá»"], a: 1 },
                        { q: "Tall nghÄ©a lÃ ?", options: ["Tháº¥p", "Cao", "BÃ©o", "Gáº§y"], a: 1 },
                        { q: "Short (height) nghÄ©a lÃ ?", options: ["Cao", "Tháº¥p", "BÃ©o", "Gáº§y"], a: 1 },
                        { q: "Fat nghÄ©a lÃ ?", options: ["Gáº§y", "BÃ©o", "Cao", "Tháº¥p"], a: 1 },
                        { q: "Thin nghÄ©a lÃ ?", options: ["BÃ©o", "Gáº§y", "Cao", "Tháº¥p"], a: 1 },
                        { q: "Hot nghÄ©a lÃ ?", options: ["Láº¡nh", "NÃ³ng", "MÃ¡t", "áº¤m"], a: 1 },
                        { q: "Cold nghÄ©a lÃ ?", options: ["NÃ³ng", "Láº¡nh", "MÃ¡t", "áº¤m"], a: 1 },
                        { q: "Warm nghÄ©a lÃ ?", options: ["Láº¡nh", "áº¤m", "NÃ³ng", "MÃ¡t"], a: 1 },
                        { q: "Cool nghÄ©a lÃ ?", options: ["NÃ³ng", "MÃ¡t", "áº¤m", "Láº¡nh"], a: 1 }
                    ],
                    hard: [
                        { q: "Past tense of 'go' is?", options: ["Goed", "Went", "Gone", "Going"], a: 1 },
                        { q: "Environment nghÄ©a lÃ ?", options: ["Thá»i tiáº¿t", "MÃ´i trÆ°á»ng", "KhÃ´ng gian", "KhÃ´ng khÃ­"], a: 1 },
                        { q: "Technology nghÄ©a lÃ ?", options: ["Khoa há»c", "CÃ´ng nghá»‡", "Lá»‹ch sá»­", "Nghá»‡ thuáº­t"], a: 1 },
                        { q: "Science nghÄ©a lÃ ?", options: ["CÃ´ng nghá»‡", "Khoa há»c", "Nghá»‡ thuáº­t", "Lá»‹ch sá»­"], a: 1 },
                        { q: "History nghÄ©a lÃ ?", options: ["Khoa há»c", "Lá»‹ch sá»­", "CÃ´ng nghá»‡", "Nghá»‡ thuáº­t"], a: 1 },
                        { q: "Art nghÄ©a lÃ ?", options: ["Lá»‹ch sá»­", "Nghá»‡ thuáº­t", "Khoa há»c", "CÃ´ng nghá»‡"], a: 1 },
                        { q: "Music nghÄ©a lÃ ?", options: ["SÃ¡ch", "Ã‚m nháº¡c", "Phim", "Tranh"], a: 1 },
                        { q: "Movie nghÄ©a lÃ ?", options: ["Ã‚m nháº¡c", "Phim", "SÃ¡ch", "Tranh"], a: 1 },
                        { q: "Book nghÄ©a lÃ ?", options: ["Phim", "SÃ¡ch", "Ã‚m nháº¡c", "Tranh"], a: 1 },
                        { q: "Painting nghÄ©a lÃ ?", options: ["SÃ¡ch", "Tranh", "Phim", "Ã‚m nháº¡c"], a: 1 },
                        { q: "Future tense of 'go' is?", options: ["Went", "Will go", "Gone", "Going"], a: 1 },
                        { q: "Photosynthesis is?", options: ["Quang há»£p", "HÃ´ háº¥p", "Bá»‘c hÆ¡i", "NgÆ°ng tá»¥"], a: 0 },
                        { q: "Einstein famous for?", options: ["Theory of Relativity", "Gravity", "Electricity", "Magnetism"], a: 0 },
                        { q: "Shakespeare wrote?", options: ["Romeo and Juliet", "Harry Potter", "Lord of the Rings", "Game of Thrones"], a: 0 },
                        { q: "Pacific Ocean is?", options: ["Smallest", "Largest", "Coldest", "Warmest"], a: 1 },
                        { q: "Mount Everest is in?", options: ["Africa", "Asia", "Europe", "America"], a: 1 },
                        { q: "DNA stands for?", options: ["Deoxyribonucleic Acid", "Deoxyribose Nucleic Acid", "Deoxy Nucleotide Acid", "Deoxyribonucleotide Acid"], a: 0 },
                        { q: "Heart pumps?", options: ["Water", "Blood", "Air", "Food"], a: 1 },
                        { q: "Earth's satellite is?", options: ["Sun", "Moon", "Mars", "Venus"], a: 1 },
                        { q: "Solar system has how many planets?", options: ["7", "8", "9", "10"], a: 1 },
                        { q: "Pythagoras theorem is for?", options: ["Triangle", "Circle", "Square", "Rectangle"], a: 0 },
                        { q: "PI value is?", options: ["3.14", "2.718", "1.618", "9.8"], a: 0 },
                        { q: "Gravity on Earth is?", options: ["9.8 m/sÂ²", "3.14 m/sÂ²", "2.718 m/sÂ²", "1.618 m/sÂ²"], a: 0 },
                        { q: "Light speed is?", options: ["300,000 km/s", "150,000 km/s", "500,000 km/s", "100,000 km/s"], a: 0 },
                        { q: "Water boiling point is?", options: ["0Â°C", "100Â°C", "32Â°C", "212Â°C"], a: 1 },
                        { q: "Freezing point of water is?", options: ["0Â°C", "100Â°C", "32Â°C", "212Â°C"], a: 0 },
                        { q: "Human body has how many bones?", options: ["206", "106", "306", "406"], a: 0 },
                        { q: "Largest organ in body is?", options: ["Heart", "Liver", "Skin", "Lung"], a: 2 },
                        { q: "Capital of USA is?", options: ["New York", "Washington D.C.", "Los Angeles", "Chicago"], a: 1 },
                        { q: "Capital of France is?", options: ["Berlin", "Paris", "Madrid", "Rome"], a: 1 },
                        { q: "Largest continent is?", options: ["Africa", "Asia", "Europe", "America"], a: 1 },
                        { q: "Smallest continent is?", options: ["Australia", "Europe", "Africa", "Antarctica"], a: 0 },
                        { q: "Longest river is?", options: ["Amazon", "Nile", "Yangtze", "Mississippi"], a: 1 },
                        { q: "Largest desert is?", options: ["Sahara", "Gobi", "Kalahari", "Antarctic"], a: 3 },
                        { q: "First man on moon is?", options: ["Neil Armstrong", "Buzz Aldrin", "Yuri Gagarin", "Alan Shepard"], a: 0 },
                        { q: "World War II ended in?", options: ["1945", "1918", "1939", "1965"], a: 0 },
                        { q: "Inventor of telephone is?", options: ["Edison", "Bell", "Tesla", "Marconi"], a: 1 },
                        { q: "Inventor of light bulb is?", options: ["Bell", "Edison", "Tesla", "Marconi"], a: 1 },
                        { q: "E = mcÂ² is from?", options: ["Newton", "Einstein", "Hawking", "Galileo"], a: 1 },
                        { q: "Periodic table has how many elements?", options: ["100", "118", "92", "150"], a: 1 },
                        { q: "Atomic number of hydrogen is?", options: ["1", "2", "8", "6"], a: 0 },
                        { q: "Oxygen atomic number is?", options: ["6", "8", "7", "1"], a: 1 },
                        { q: "Carbon atomic number is?", options: ["6", "8", "7", "1"], a: 0 },
                        { q: "Nitrogen atomic number is?", options: ["6", "8", "7", "1"], a: 2 },
                        { q: "Largest planet is?", options: ["Earth", "Mars", "Jupiter", "Saturn"], a: 2 },
                        { q: "Smallest planet is?", options: ["Mercury", "Venus", "Earth", "Mars"], a: 0 },
                        { q: "Earth's moon is called?", options: ["Luna", "Moon", "Phobos", "Deimos"], a: 1 },
                        { q: "Sun is a?", options: ["Planet", "Star", "Moon", "Comet"], a: 1 },
                        { q: "Milky Way is a?", options: ["Star", "Galaxy", "Planet", "Comet"], a: 1 },
                        { q: "Black hole is?", options: ["Star", "Hole in space", "Planet", "Comet"], a: 1 },
                        { q: "Big Bang is?", options: ["Explosion", "Theory of universe origin", "Star birth", "Planet formation"], a: 1 },
                        { q: "Evolution theory by?", options: ["Einstein", "Darwin", "Newton", "Galileo"], a: 1 }
                    ],
                    superhard: [
                        // Báº¡n cÃ³ thá»ƒ thÃªm sau
                    ],
                    extreme: [
                        // Báº¡n cÃ³ thá»ƒ thÃªm sau
                    ]
                },
                vi: {
                    easy: [
                        { q: "Hello nghÄ©a lÃ  gÃ¬ trong tiáº¿ng Viá»‡t?", options: ["Táº¡m biá»‡t", "Xin chÃ o", "Cáº£m Æ¡n", "Xin lá»—i"], a: 1 },
                        { q: "Apple lÃ  quáº£ gÃ¬ trong tiáº¿ng Viá»‡t?", options: ["Cam", "Chuá»‘i", "TÃ¡o", "XoÃ i"], a: 2 },
                        { q: "Dog lÃ  con gÃ¬ trong tiáº¿ng Viá»‡t?", options: ["MÃ¨o", "ChÃ³", "GÃ ", "Vá»‹t"], a: 1 },
                        { q: "Thank you nghÄ©a lÃ  gÃ¬ trong tiáº¿ng Viá»‡t?", options: ["Xin chÃ o", "Táº¡m biá»‡t", "Cáº£m Æ¡n", "Xin lá»—i"], a: 2 }
                    ]
                }
            };

            let currentQuestions = questionSets[currentLearnLang][currentMode] || questionSets.en.easy;

            function updateClock() {
                const options = { timeZone: currentTimezone, hour: '2-digit', minute: '2-digit', second: '2-digit' };
                const now = new Date().toLocaleTimeString('vi-VN', options);
                document.getElementById('clock').textContent = now;
            }
            setInterval(updateClock, 1000);
            updateClock();

            function updateScore() {
                const elements = document.querySelectorAll('#score, #current-score, #shop-score');
                elements.forEach(el => el.textContent = score);
            }

            // ÄÄ‚NG NHáº¬P / ÄÄ‚NG KÃ + Báº¢O Vá»† Há»ŒC
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = savedUser;
                isLoggedIn = true;
                document.getElementById('username-display').textContent = currentUser;
                document.getElementById('logout-btn').classList.remove('hidden');
                document.getElementById('auth-btn').textContent = 'ğŸ‘¤ ' + currentUser;
            }

            document.getElementById('auth-btn').addEventListener('click', () => {
                document.getElementById('auth-modal').classList.remove('hidden');
            });
            document.getElementById('close-auth').addEventListener('click', () => {
                document.getElementById('auth-modal').classList.add('hidden');
            });

            document.getElementById('register-btn').addEventListener('click', () => {
                const username = document.getElementById('auth-username').value.trim();
                const password = document.getElementById('auth-password').value;
                if (!username || !password) {
                    alert('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ tÃªn Ä‘Äƒng nháº­p vÃ  máº­t kháº©u nha!');
                    return;
                }
                if (localStorage.getItem(username)) {
                    alert('TÃªn Ä‘Äƒng nháº­p Ä‘Ã£ tá»“n táº¡i rá»“i, thá»­ tÃªn khÃ¡c nha!');
                    return;
                }
                localStorage.setItem(username, password);
                alert('ÄÄƒng kÃ½ thÃ nh cÃ´ng! Giá» báº¡n cÃ³ thá»ƒ Ä‘Äƒng nháº­p nha ğŸ‰');
                document.getElementById('auth-username').value = '';
                document.getElementById('auth-password').value = '';
            });

            document.getElementById('login-btn').addEventListener('click', () => {
                const username = document.getElementById('auth-username').value.trim();
                const password = document.getElementById('auth-password').value;
                if (!username || !password) {
                    alert('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ tÃªn Ä‘Äƒng nháº­p vÃ  máº­t kháº©u nha!');
                    return;
                }
                const savedPass = localStorage.getItem(username);
                if (savedPass && savedPass === password) {
                    isLoggedIn = true;
                    currentUser = username;
                    localStorage.setItem('currentUser', username);
                    document.getElementById('username-display').textContent = username;
                    document.getElementById('logout-btn').classList.remove('hidden');
                    document.getElementById('auth-btn').textContent = 'ğŸ‘¤ ' + username;
                    document.getElementById('auth-modal').classList.add('hidden');
                    alert('ÄÄƒng nháº­p thÃ nh cÃ´ng! ChÃ o ' + username + ' â¤ï¸');
                } else {
                    alert('TÃªn Ä‘Äƒng nháº­p hoáº·c máº­t kháº©u sai rá»“i huhu');
                }
            });

            document.getElementById('logout-btn').addEventListener('click', () => {
                if (confirm('Báº¡n muá»‘n Ä‘Äƒng xuáº¥t chá»©?')) {
                    isLoggedIn = false;
                    currentUser = null;
                    localStorage.removeItem('currentUser');
                    document.getElementById('username-display').textContent = 'KhÃ¡ch';
                    document.getElementById('logout-btn').classList.add('hidden');
                    document.getElementById('auth-btn').textContent = 'ğŸ” ÄÄƒng Nháº­p / ÄÄƒng KÃ½';
                    alert('ÄÄƒng xuáº¥t thÃ nh cÃ´ng!');
                }
            });

            document.getElementById('start-btn').addEventListener('click', () => {
                if (!isLoggedIn) {
                    alert('Vui lÃ²ng Ä‘Äƒng nháº­p hoáº·c Ä‘Äƒng kÃ½ Ä‘á»ƒ há»c nha báº¡n! â¤ï¸');
                    document.getElementById('auth-modal').classList.remove('hidden');
                    return;
                }
                if (confirm('Báº¡n Ä‘Ã£ sáºµn sÃ ng há»c chÆ°a? ğŸ’ª')) {
                    document.getElementById('start-screen').classList.add('hidden');
                    document.getElementById('quiz-screen').classList.remove('hidden');
                    currentQuestion = 0;
                    loadQuestion();
                }
            });

            function loadQuestion() {
                if (currentQuestion >= currentQuestions.length) {
                    document.getElementById('question').textContent = 'HoÃ n thÃ nh táº¥t cáº£! ğŸŠ';
                    document.getElementById('options').innerHTML = '';
                    document.getElementById('result').textContent = `Báº¡n Ä‘áº¡t ${score} Ä‘iá»ƒm! Giá»i láº¯m!`;
                    return;
                }
                const q = currentQuestions[currentQuestion];
                document.getElementById('question').textContent = q.q;
                document.getElementById('options').innerHTML = '';
                document.getElementById('result').textContent = '';
                q.options.forEach((opt, i) => {
                    const btn = document.createElement('button');
                    btn.textContent = opt;
                    btn.classList.add('option-btn');
                    btn.addEventListener('click', () => checkAnswer(i));
                    document.getElementById('options').appendChild(btn);
                });
            }

            function checkAnswer(selected) {
                const q = currentQuestions[currentQuestion];
                const bonus = modes[currentMode].bonus;
                if (selected === q.a) {
                    score += bonus;
                    document.getElementById('result').textContent = `ÄÃºng rá»“i! +${bonus} Ä‘iá»ƒm ğŸ‰`;
                } else {
                    document.getElementById('result').textContent = `Sai rá»“i! ÄÃ¡p Ã¡n: ${q.options[q.a]}`;
                }
                updateScore();
                currentQuestion++;
                setTimeout(loadQuestion, 2000);
            }

            document.getElementById('skip-btn').addEventListener('click', () => {
                if (score >= 30) {
                    if (confirm('Skip cÃ¢u nÃ y tá»‘n 30 Ä‘iá»ƒm, báº¡n Ä‘á»“ng Ã½ chá»©?')) {
                        score -= 30;
                        updateScore();
                        currentQuestion++;
                        loadQuestion();
                    }
                } else {
                    alert('KhÃ´ng Ä‘á»§ Ä‘iá»ƒm Ä‘á»ƒ skip nha!');
                }
            });

            document.getElementById('quit-btn').addEventListener('click', () => {
                if (score >= 10) {
                    if (confirm('Báº¡n Ä‘á»“ng Ã½ trá»« 10 Ä‘iá»ƒm Ä‘á»ƒ tá»« bá» chá»©?')) {
                        score -= 10;
                        updateScore();
                        document.getElementById('quiz-screen').classList.add('hidden');
                        document.getElementById('start-screen').classList.remove('hidden');
                    }
                } else {
                    alert('KhÃ´ng Ä‘á»§ Ä‘iá»ƒm Ä‘á»ƒ tá»« bá» nha! HÃ£y cá»‘ gáº¯ng thÃªm chÃºt ná»¯a ğŸ’ª');
                }
            });

            document.getElementById('restart-btn').addEventListener('click', () => {
                if (confirm('Báº¡n cÃ³ muá»‘n chÆ¡i láº¡i? Äiá»ƒm cá»§a báº¡n sáº½ bá»‹ xÃ³a Ä‘áº¥y!')) {
                    score = 0;
                    currentQuestion = 0;
                    updateScore();
                    loadQuestion();
                }
            });

            document.getElementById('reset-score-btn').addEventListener('click', () => {
                if (confirm('Báº¡n cháº¯c muá»‘n reset Ä‘iá»ƒm vá» 0 chá»©?')) {
                    score = 0;
                    updateScore();
                }
            });

            document.getElementById('back-menu-btn').addEventListener('click', () => {
                if (confirm('Báº¡n muá»‘n trá»Ÿ vá» menu chÃ­nh? (Äiá»ƒm hiá»‡n táº¡i sáº½ giá»¯ nguyÃªn)')) {
                    document.getElementById('quiz-screen').classList.add('hidden');
                    document.getElementById('start-screen').classList.remove('hidden');
                }
            });

            document.getElementById('speak-btn').addEventListener('click', () => {
                const text = document.getElementById('question').textContent;
                if (text && 'speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = ttsLangs[currentLang] || 'vi-VN';
                    utterance.rate = 0.9;
                    speechSynthesis.cancel();
                    speechSynthesis.speak(utterance);
                }
            });

            document.getElementById('lang-btn').addEventListener('click', () => {
                document.getElementById('lang-modal').classList.remove('hidden');
            });
            document.getElementById('close-lang').addEventListener('click', () => {
                document.getElementById('lang-modal').classList.add('hidden');
            });
            document.querySelectorAll('[data-lang]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const newLang = btn.dataset.lang;
                    if (newLang !== currentLang) {
                        currentLang = newLang;
                        alert('ÄÃ£ Ä‘á»•i ngÃ´n ngá»¯ phÃ¡t Ã¢m sang ' + btn.textContent.trim() + '!');
                    }
                    document.getElementById('lang-modal').classList.add('hidden');
                });
            });

            document.getElementById('mode-btn').addEventListener('click', () => {
                const list = ['easy', 'normal', 'hard', 'superhard', 'extreme'];
                const names = { easy: 'Dá»…', normal: 'BÃ¬nh ThÆ°á»ng', hard: 'KhÃ³', superhard: 'SiÃªu KhÃ³', extreme: 'Cá»±c KhÃ³' };
                const idx = list.indexOf(currentMode);
                let next = list[(idx + 1) % list.length];
                if (next === 'extreme' && !confirm('âš ï¸ Cá»°C KHÃ“ âš ï¸\nChá»‰ dÃ nh cho thÃ¡nh tiáº¿ng Anh!\nBáº¡n cÃ³ dÃ¡m thá»­ khÃ´ng? ğŸ˜ˆ')) return;
                currentMode = next;
                document.getElementById('mode-btn').textContent = `âš¡ Mode: ${names[next]}`;
                currentQuestions = questionSets[currentLearnLang][next] || questionSets[currentLearnLang].easy || questionSets.en.easy;
                currentQuestion = 0;
                loadQuestion();
            });

            document.getElementById('shop-btn').addEventListener('click', () => {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('shop-screen').classList.remove('hidden');
                updateScore();
            });
            document.getElementById('back-shop').addEventListener('click', () => {
                document.getElementById('shop-screen').classList.add('hidden');
                document.getElementById('start-screen').classList.remove('hidden');
            });

            document.querySelectorAll('.shop-item').forEach(item => {
                item.addEventListener('click', () => {
                    const country = item.dataset.country;
                    const price = parseInt(item.dataset.price);
                    if (unlockedFlags.includes(country)) {
                        currentTimezone = timezones[country] || timezones.vn;
                        updateClock();
                        alert('ÄÃ£ Ã¡p dá»¥ng quá»‘c ká»³ ' + country.toUpperCase() + '!');
                    } else if (score >= price) {
                        if (confirm(`Mua quá»‘c ká»³ ${country.toUpperCase()} vá»›i ${price} Ä‘iá»ƒm?`)) {
                            score -= price;
                            unlockedFlags.push(country);
                            updateScore();
                            currentTimezone = timezones[country] || timezones.vn;
                            updateClock();
                            alert('Mua thÃ nh cÃ´ng! Báº¡n cÃ³ thá»ƒ vÃ o Äá»•i NgÃ´n Ngá»¯ Há»c Ä‘á»ƒ chá»n ngÃ´n ngá»¯ má»›i nha! ğŸ‰');
                        }
                    } else {
                        alert('KhÃ´ng Ä‘á»§ Ä‘iá»ƒm nha!');
                    }
                });
            });

            document.getElementById('status-btn').addEventListener('click', () => {
                document.getElementById('status-info').classList.toggle('hidden');
            });

            document.getElementById('report-btn').addEventListener('click', () => {
                document.getElementById('report-form').classList.remove('hidden');
            });
            document.getElementById('cancel-report').addEventListener('click', () => {
                document.getElementById('report-form').classList.add('hidden');
            });
            document.getElementById('send-report').addEventListener('click', () => {
                const email = document.getElementById('report-email').value.trim();
                const message = document.getElementById('report-message').value.trim();
                if (!email || !message) {
                    alert('Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ Gmail vÃ  tin nháº¯n nha!');
                    return;
                }
                const subject = encodeURIComponent('Report Bug tá»« ' + email);
                const body = encodeURIComponent('NgÆ°á»i bÃ¡o: ' + email + '\n\nNá»™i dung lá»—i:\n' + message);
                window.location.href = `mailto:Herogoodboymc2024@gmail.com?subject=\( {subject}&body= \){body}`;
                alert('Cáº¢M Æ N Báº N ÄÃƒ Gá»¬I BÃO CÃO Äáº¾N MÃŒNH, VUI LÃ’NG CHá»œ MÃŒNH TRONG VÃ’NG 24H Náº¾U MÃŒNH Báº¬N THÃŒ CÃ“ THá»‚ HÆ N');
                document.getElementById('report-form').classList.add('hidden');
                document.getElementById('report-email').value = '';
                document.getElementById('report-message').value = '';
            });

            document.getElementById('suggest-btn').addEventListener('click', () => {
                document.getElementById('suggest-form').classList.remove('hidden');
            });
            document.getElementById('cancel-suggest').addEventListener('click', () => {
                document.getElementById('suggest-form').classList.add('hidden');
            });
            document.getElementById('send-suggest').addEventListener('click', () => {
                const email = document.getElementById('suggest-email').value.trim();
                const word = document.getElementById('suggest-word').value.trim();
                if (!email || !word) {
                    alert('Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ Gmail vÃ  tá»« muá»‘n thÃªm nha!');
                    return;
                }
                const subject = encodeURIComponent('Gá»£i Ã Tá»« Há»c tá»« ' + email);
                const body = encodeURIComponent('NgÆ°á»i gá»£i Ã½: ' + email + '\n\nTá»«/cÃ¢u muá»‘n thÃªm:\n' + word);
                window.location.href = `mailto:Herogoodboymc2024@gmail.com?subject=\( {subject}&body= \){body}`;
                alert('Cáº¢M Æ N Báº N ÄÃƒ Gá»¬I Ã, MÃŒNH Sáº¼ Cáº¬P NHáº¬T Sá»šM NHáº¤T CHO Báº N NHÃ‰, Náº¾U TRá»„ CÃ“ THá»‚ DO MÃŒNH Báº¬N HOáº¶C KHÃ”NG CÃ“ THá»œI GIAN NHÃ‰');
                document.getElementById('suggest-form').classList.add('hidden');
                document.getElementById('suggest-email').value = '';
                document.getElementById('suggest-word').value = '';
            });

            // Äá»•i NgÃ´n Ngá»¯ Há»c - KIá»‚M TRA MUA QUá»C GIA
            document.getElementById('lang-learn-btn').addEventListener('click', () => {
                document.getElementById('lang-learn-modal').classList.remove('hidden');
            });
            document.getElementById('close-learn-lang').addEventListener('click', () => {
                document.getElementById('lang-learn-modal').classList.add('hidden');
            });
            document.querySelectorAll('[data-learn-lang]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const newLang = btn.dataset.learnLang;
                    const country = btn.dataset.country;
                    if (unlockedFlags.includes(country) || newLang === 'en' || newLang === 'vi') {
                        if (newLang !== currentLearnLang) {
                            if (confirm('Báº¡n cháº¥p nháº­n Ä‘á»•i sang ngÃ´n ngá»¯ khÃ¡c? Báº¡n Ä‘á»“ng Ã½ chá»©?')) {
                                currentLearnLang = newLang;
                                currentQuestions = questionSets[currentLearnLang][currentMode] || questionSets.en.easy;
                                currentQuestion = 0;
                                loadQuestion();
                                alert('ÄÃ£ Ä‘á»•i ngÃ´n ngá»¯ há»c thÃ nh cÃ´ng!');
                            }
                        }
                    } else {
                        alert('Quá»‘c gia nÃ y hiá»‡n táº¡i báº¡n chÆ°a mua Ä‘á»ƒ má»Ÿ khÃ³a nÃ³, vui lÃ²ng vÃ o mua á»Ÿ shop nhÃ© báº¡n!');
                    }
                    document.getElementById('lang-learn-modal').classList.add('hidden');
                });
            });

            updateScore();
        };
    </script>
</body>
</html>
