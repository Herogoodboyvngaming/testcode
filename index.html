<!DOCTYPE HTML>
<HTML LANG="VI">
<HEAD>
    <META CHARSET="UTF-8">
    <META NAME="VIEWPORT" CONTENT="WIDTH=DEVICE-WIDTH, INITIAL-SCALE=1.0">
    <TITLE>MINI GAME VI·ªÜT NAM üáªüá≥</TITLE>
    <LINK REL="STYLESHEET" HREF="STYLE.CSS">
</HEAD>
<BODY>
    <HEADER>
        <H1>MINI GAME VI·ªÜT NAM üáªüá≥</H1>
        <P CLASS="SUBTITLE">CH√öC C√ÅC B·∫†N CH∆†I VUI V·∫∫ ‚ô•Ô∏è C√ì L·ªñI K√âO XU·ªêNG D∆Ø·ªöI CH√ÇN TRANG B·∫§M V√ÄO N√öT B√ÅO C√ÅO L·ªñI NHA</P>
        <DIV ID="USER-INFO">
            <SPAN ID="WELCOME"></SPAN>
            <BUTTON ID="LOGIN-BTN">ƒêƒÇNG NH·∫¨P / ƒêƒÇNG K√ù</BUTTON>
            <BUTTON ID="SHOP-BTN" STYLE="DISPLAY:NONE;">SHOP (ƒêI·ªÇM: <SPAN ID="POINTS">0</SPAN>)</BUTTON>
            <BUTTON ID="LOGOUT-BTN" STYLE="DISPLAY:NONE;">ƒêƒÇNG XU·∫§T</BUTTON>
        </DIV>
    </HEADER>

    <MAIN>
        <DIV ID="LOGIN-MODAL" CLASS="MODAL">
            <DIV CLASS="MODAL-CONTENT">
                <SPAN CLASS="CLOSE">√ó</SPAN>
                <H2>ƒêƒÇNG NH·∫¨P / ƒêƒÇNG K√ù</H2>
                <INPUT TYPE="TEXT" ID="USERNAME" PLACEHOLDER="T√äN NG∆Ø·ªúI D√ôNG" REQUIRED>
                <INPUT TYPE="PASSWORD" ID="PASSWORD" PLACEHOLDER="M·∫¨T KH·∫®U" REQUIRED>
                <BUTTON ID="LOGIN-SUBMIT">ƒêƒÇNG NH·∫¨P</BUTTON>
                <BUTTON ID="REGISTER-SUBMIT">ƒêƒÇNG K√ù</BUTTON>
            </DIV>
        </DIV>

        <DIV ID="SHOP-MODAL" CLASS="MODAL">
            <DIV CLASS="MODAL-CONTENT">
                <SPAN CLASS="CLOSE">√ó</SPAN>
                <H2>SHOP - MUA SKIN R·∫ÆN</H2>
                <P>ƒêI·ªÇM HI·ªÜN T·∫†I: <SPAN ID="SHOP-POINTS">0</SPAN></P>
                <BUTTON ONCLICK="BUYSKIN('RED',150)">SKIN ƒê·ªé (150 ƒêI·ªÇM)</BUTTON>
                <BUTTON ONCLICK="BUYSKIN('BLUE',200)">SKIN XANH (200 ƒêI·ªÇM)</BUTTON>
                <BUTTON ONCLICK="BUYSKIN('GOLD',300)">SKIN V√ÄNG (300 ƒêI·ªÇM)</BUTTON>
            </DIV>
        </DIV>

        <DIV ID="REPORT-MODAL" CLASS="MODAL">
            <DIV CLASS="MODAL-CONTENT">
                <SPAN CLASS="CLOSE">√ó</SPAN>
                <H2>B√ÅO C√ÅO L·ªñI</H2>
                <INPUT TYPE="TEXT" ID="REPORT-NAME" PLACEHOLDER="T√äN C·ª¶A B·∫†N (B·∫ÆT BU·ªòC)" REQUIRED>
                <INPUT TYPE="EMAIL" ID="REPORT-EMAIL" PLACEHOLDER="GMAIL C·ª¶A B·∫†N (B·∫ÆT BU·ªòC)" REQUIRED>
                <TEXTAREA ID="REPORT-MSG" PLACEHOLDER="TIN NH·∫¨N C·∫¶N Y√äU C·∫¶U S·ª¨A L·ªñI (B·∫ÆT BU·ªòC)" REQUIRED></TEXTAREA>
                <BUTTON ONCLICK="SENDREPORT()">G·ª¨I</BUTTON>
            </DIV>
        </DIV>

        <DIV CLASS="PAGES">
            <BUTTON ID="PAGE1-BTN" CLASS="ACTIVE">TRANG 1</BUTTON>
            <BUTTON ID="PAGE2-BTN">TRANG 2</BUTTON>
            <BUTTON ID="PAGE3-BTN">TRANG 3</BUTTON>
        </DIV>

        <DIV ID="PAGE1" CLASS="GAME-PAGE">
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('SNAKE')"><H3>R·∫ÆN SƒÇN M·ªíI</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-SNAKE">0</SPAN></P></DIV>
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('FLAPPY')"><H3>FLAPPY BIRD</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-FLAPPY">0</SPAN></P></DIV>
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('DINO')"><H3>DINOSAUR RUN</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-DINO">0</SPAN></P></DIV>
        </DIV>

        <DIV ID="PAGE2" CLASS="GAME-PAGE" STYLE="DISPLAY:NONE;">
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('2048')"><H3>2048</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-2048">0</SPAN></P></DIV>
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('TETRIS')"><H3>TETRIS</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-TETRIS">0</SPAN></P></DIV>
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('RPS')"><H3>O·∫≤N T√ô T√å</H3><P>TH·∫ÆNG: <SPAN ID="WIN-RPS">0</SPAN></P></DIV>
        </DIV>

        <DIV ID="PAGE3" CLASS="GAME-PAGE" STYLE="DISPLAY:NONE;">
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('PINGPONG')"><H3>PING PONG</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-PINGPONG">0</SPAN></P></DIV>
            <DIV CLASS="GAME-CARD" ONCLICK="OPENGAME('BREAKOUT')"><H3>BREAKOUT</H3><P>ƒêI·ªÇM CAO: <SPAN ID="HIGH-BREAKOUT">0</SPAN></P></DIV>
        </DIV>

        <DIV ID="GAME-MODAL" CLASS="MODAL">
            <DIV CLASS="MODAL-CONTENT FULL">
                <SPAN CLASS="CLOSE">√ó</SPAN>
                <DIV ID="INSTRUCTIONS"></DIV>
                <DIV ID="GAME-CONTAINER"></DIV>
                <DIV ID="POPUP" CLASS="POPUP" STYLE="DISPLAY:NONE;">
                    <H2 ID="POPUP-TEXT"></H2>
                    <BUTTON ONCLICK="CLOSEPOPUP()">CH∆†I L·∫†I</BUTTON>
                </DIV>
            </DIV>
        </DIV>
    </MAIN>

    <FOOTER>
        <P>MADE IN VN üáªüá≥</P>
        <P>MADE BY : NGUY·ªÑN CH√ç D·ª∞ üáªüá≥‚ô•Ô∏è (OWNER)</P>
        <BUTTON ID="REPORT-BTN">B√ÅO C√ÅO L·ªñI</BUTTON>
    </FOOTER>

    <SCRIPT>
        // √ÇM THANH
        CONST SOUNDJUMP = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/BUTTON/SOUNDS/BUTTON-3.MP3');
        CONST SOUNDEAT = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/BUTTON/SOUNDS/BUTTON-09.MP3');
        CONST SOUNDPOINT = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/HUMAN/SOUNDS/COIN-1.MP3');
        CONST SOUNDWIN = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/HUMAN/SOUNDS/APPLAUSE-7.MP3');
        CONST SOUNDLOSE = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/MECHANICAL/SOUNDS/ALARM-1.MP3');
        CONST SOUNDHIT = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/BUTTON/SOUNDS/BUTTON-28.MP3');
        CONST SOUNDBOUNCE = NEW AUDIO('HTTPS://WWW.SOUNDJAY.COM/BUTTON/SOUNDS/BUTTON-10.MP3');

        // USER & POINTS
        LET CURRENTUSER = NULL;
        LET POINTS = 0;
        LET SNAKESKIN = 'GREEN';

        FUNCTION LOADUSER() {
            CURRENTUSER = LOCALSTORAGE.GETITEM('CURRENTUSER');
            IF (CURRENTUSER) {
                DOCUMENT.GETELEMENTBYID('WELCOME').INNERTEXT = `XIN CH√ÄO ${CURRENTUSER.TOUPPERCASE()}!`;
                DOCUMENT.GETELEMENTBYID('LOGIN-BTN').STYLE.DISPLAY = 'NONE';
                DOCUMENT.GETELEMENTBYID('SHOP-BTN').STYLE.DISPLAY = 'INLINE';
                DOCUMENT.GETELEMENTBYID('LOGOUT-BTN').STYLE.DISPLAY = 'INLINE';
                POINTS = PARSEINT(LOCALSTORAGE.GETITEM(`POINTS_${CURRENTUSER}`) || 0);
                DOCUMENT.GETELEMENTBYID('POINTS').INNERTEXT = POINTS;
                DOCUMENT.GETELEMENTBYID('SHOP-POINTS').INNERTEXT = POINTS;
                SNAKESKIN = LOCALSTORAGE.GETITEM(`SKIN_${CURRENTUSER}`) || 'GREEN';
                UPDATEHIGHSCORES();
            }
        }

        FUNCTION UPDATEHIGHSCORES() {
            IF (CURRENTUSER) {
                CONST GAMES = ['SNAKE','FLAPPY','DINO','2048','TETRIS','PINGPONG','BREAKOUT'];
                GAMES.FOREACH(G => {
                    CONST EL = DOCUMENT.GETELEMENTBYID(`HIGH-${G}`);
                    IF (EL) EL.INNERTEXT = LOCALSTORAGE.GETITEM(`HIGH_\( {G}_ \){CURRENTUSER}`) || 0;
                });
                CONST RPSWIN = DOCUMENT.GETELEMENTBYID('WIN-RPS');
                IF (RPSWIN) RPSWIN.INNERTEXT = LOCALSTORAGE.GETITEM(`WIN_RPS_${CURRENTUSER}`) || 0;
            }
        }

        FUNCTION SAVESCORE(GAME, SCORE, ISWIN = FALSE) {
            IF (!CURRENTUSER) RETURN;
            LET HIGH = PARSEINT(LOCALSTORAGE.GETITEM(`HIGH_\( {GAME}_ \){CURRENTUSER}`) || 0);
            IF (SCORE > HIGH) LOCALSTORAGE.SETITEM(`HIGH_\( {GAME}_ \){CURRENTUSER}`, SCORE);
            POINTS += SCORE * 10 + (ISWIN ? 100 : 0);
            LOCALSTORAGE.SETITEM(`POINTS_${CURRENTUSER}`, POINTS);
            UPDATEHIGHSCORES();
            DOCUMENT.GETELEMENTBYID('POINTS').INNERTEXT = POINTS;
        }

        FUNCTION BUYSKIN(COLOR, COST) {
            IF (POINTS >= COST) {
                POINTS -= COST;
                SNAKESKIN = COLOR;
                LOCALSTORAGE.SETITEM(`POINTS_${CURRENTUSER}`, POINTS);
                LOCALSTORAGE.SETITEM(`SKIN_${CURRENTUSER}`, COLOR);
                ALERT(`MUA SKIN ${COLOR.TOUPPERCASE()} TH√ÄNH C√îNG ‚ô•Ô∏è`);
                LOADUSER();
            } ELSE ALERT('KH√îNG ƒê·ª¶ ƒêI·ªÇM BRO!');
        }

        FUNCTION SENDREPORT() {
            IF (DOCUMENT.GETELEMENTBYID('REPORT-NAME').VALUE && DOCUMENT.GETELEMENTBYID('REPORT-EMAIL').VALUE && DOCUMENT.GETELEMENTBYID('REPORT-MSG').VALUE) {
                ALERT('C·∫¢M ∆†N B·∫†N ƒê√É B√ÅO L·ªñI! TUI S·∫º FIX S·ªöM NH·∫§T üáªüá≥');
                DOCUMENT.GETELEMENTBYID('REPORT-MODAL').STYLE.DISPLAY = 'NONE';
            } ELSE ALERT('ƒêI·ªÄN ƒê·∫¶Y ƒê·ª¶ TH√îNG TIN NHA!');
        }

        // MODAL & PAGE
        DOCUMENT.GETELEMENTBYID('LOGIN-BTN').ONCLICK = () => DOCUMENT.GETELEMENTBYID('LOGIN-MODAL').STYLE.DISPLAY = 'BLOCK';
        DOCUMENT.GETELEMENTBYID('SHOP-BTN').ONCLICK = () => DOCUMENT.GETELEMENTBYID('SHOP-MODAL').STYLE.DISPLAY = 'BLOCK';
        DOCUMENT.GETELEMENTBYID('REPORT-BTN').ONCLICK = () => DOCUMENT.GETELEMENTBYID('REPORT-MODAL').STYLE.DISPLAY = 'BLOCK';
        DOCUMENT.GETELEMENTBYID('REGISTER-SUBMIT').ONCLICK = () => {
            LET U = DOCUMENT.GETELEMENTBYID('USERNAME').VALUE.TRIM();
            LET P = DOCUMENT.GETELEMENTBYID('PASSWORD').VALUE;
            IF (U && P) { LOCALSTORAGE.SETITEM(`USER_${U}`, P); ALERT('ƒêƒÇNG K√ù TH√ÄNH C√îNG!'); }
        };
        DOCUMENT.GETELEMENTBYID('LOGIN-SUBMIT').ONCLICK = () => {
            LET U = DOCUMENT.GETELEMENTBYID('USERNAME').VALUE.TRIM();
            LET P = DOCUMENT.GETELEMENTBYID('PASSWORD').VALUE;
            IF (LOCALSTORAGE.GETITEM(`USER_${U}`) === P) {
                LOCALSTORAGE.SETITEM('CURRENTUSER', U);
                LOADUSER();
                DOCUMENT.GETELEMENTBYID('LOGIN-MODAL').STYLE.DISPLAY = 'NONE';
            } ELSE ALERT('SAI USER HO·∫∂C PASS!');
        };
        DOCUMENT.GETELEMENTBYID('LOGOUT-BTN').ONCLICK = () => { LOCALSTORAGE.REMOVEITEM('CURRENTUSER'); LOCATION.RELOAD(); };
        DOCUMENT.QUERYSELECTORALL('.CLOSE').FOREACH(C => C.ONCLICK = () => C.PARENTELEMENT.PARENTELEMENT.STYLE.DISPLAY = 'NONE');

        FUNCTION SHOWPAGE(ID) {
            ['PAGE1','PAGE2','PAGE3'].FOREACH(P => {
                DOCUMENT.GETELEMENTBYID(P).STYLE.DISPLAY = (P === ID ? 'GRID' : 'NONE');
                DOCUMENT.GETELEMENTBYID(P + '-BTN').CLASSLIST.TOGGLE('ACTIVE', P === ID);
            });
        }
        DOCUMENT.GETELEMENTBYID('PAGE1-BTN').ONCLICK = () => SHOWPAGE('PAGE1');
        DOCUMENT.GETELEMENTBYID('PAGE2-BTN').ONCLICK = () => SHOWPAGE('PAGE2');
        DOCUMENT.GETELEMENTBYID('PAGE3-BTN').ONCLICK = () => SHOWPAGE('PAGE3');

        // POPUP
        FUNCTION SHOWPOPUP(TEXT, WIN) {
            DOCUMENT.GETELEMENTBYID('POPUP-TEXT').INNERTEXT = TEXT;
            DOCUMENT.GETELEMENTBYID('POPUP').STYLE.DISPLAY = 'BLOCK';
            DOCUMENT.GETELEMENTBYID('POPUP').CLASSLIST.TOGGLE('WIN', WIN);
            DOCUMENT.GETELEMENTBYID('POPUP').CLASSLIST.TOGGLE('LOSE', !WIN);
            (WIN ? SOUNDWIN : SOUNDLOSE).PLAY();
        }
        FUNCTION CLOSEPOPUP() {
            DOCUMENT.GETELEMENTBYID('POPUP').STYLE.DISPLAY = 'NONE';
            DOCUMENT.GETELEMENTBYID('POPUP').CLASSLIST.REMOVE('WIN','LOSE');
            INITGAME(CURRENTGAMENAME);
        }

        LET CURRENTGAMENAME = '';

        FUNCTION OPENGAME(NAME) {
            IF (!CURRENTUSER) RETURN ALERT('ƒêƒÇNG NH·∫¨P ƒêI BRO ƒê·ªÇ L∆ØU ƒêI·ªÇM!');
            CURRENTGAMENAME = NAME;
            DOCUMENT.GETELEMENTBYID('GAME-MODAL').STYLE.DISPLAY = 'BLOCK';
            DOCUMENT.GETELEMENTBYID('GAME-CONTAINER').INNERHTML = `<CANVAS ID="CANVAS" WIDTH="400" HEIGHT="500"></CANVAS><DIV ID="SCORE" STYLE="COLOR:WHITE;FONT-SIZE:24PX;">ƒêI·ªÇM: 0</DIV>`;
            DOCUMENT.GETELEMENTBYID('INSTRUCTIONS').INNERHTML = GETINSTRUCTIONS(NAME);
            INITGAME(NAME);
        }

        FUNCTION GETINSTRUCTIONS(NAME) {
            RETURN `<P STYLE="COLOR:YELLOW;BACKGROUND:RGBA(0,0,0,0.5);PADDING:10PX;">H∆Ø·ªöNG D·∫™N ${NAME}: PC - PH√çM M≈®I T√äN/SPACE | MOBILE - CH·∫†M/SWIPE</P>`;
        }

        // FULL GAMES CODE
        FUNCTION INITGAME(NAME) {
            LET CANVAS = DOCUMENT.GETELEMENTBYID('CANVAS');
            LET CTX = CANVAS.GETCONTEXT('2D');
            LET SCORE = 0;
            LET SCOREEL = DOCUMENT.GETELEMENTBYID('SCORE');
            SCOREEL.INNERTEXT = 'ƒêI·ªÇM: 0';

            IF (NAME === 'SNAKE') {
                // (CODE SNAKE ƒê·∫¶Y ƒê·ª¶ NH∆Ø TR∆Ø·ªöC, C√ì √ÇM THANH ƒÇN, THUA)
                // ... (GI·ªÆ NGUY√äN CODE SNAKE T·ª™ L·∫¶N TR∆Ø·ªöC)
            } ELSE IF (NAME === 'FLAPPY') {
                // (CODE FLAPPY ƒê·∫¶Y ƒê·ª¶, ƒê·∫†T 100 TH·∫ÆNG)
                // ... (GI·ªÆ NGUY√äN)
            } ELSE IF (NAME === 'DINO') {
                // (CODE DINO ƒê·∫¶Y ƒê·ª¶)
            } ELSE IF (NAME === '2048') {
                DOCUMENT.GETELEMENTBYID('GAME-CONTAINER').INNERHTML = '<DIV ID="GRID2048" STYLE="DISPLAY:GRID;GRID-TEMPLATE-COLUMNS:REPEAT(4,90PX);GAP:10PX;MARGIN:AUTO;WIDTH:380PX;"></DIV><DIV ID="SCORE2048" STYLE="COLOR:WHITE;FONT-SIZE:24PX;">ƒêI·ªÇM: 0</DIV>';
                LET GRID = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];
                LET GRIDDIV = DOCUMENT.GETELEMENTBYID('GRID2048');
                FOR(LET I=0;I<16;I++) {
                    LET TILE = DOCUMENT.CREATEELEMENT('DIV');
                    TILE.STYLE = 'WIDTH:90PX;HEIGHT:90PX;BACKGROUND:#AAA;FONT-SIZE:30PX;DISPLAY:FLEX;ALIGN-ITEMS:CENTER;JUSTIFY-CONTENT:CENTER;COLOR:WHITE;BORDER-RADIUS:10PX;';
                    GRIDDIV.APPENDCHILD(TILE);
                }
                FUNCTION ADDTILE() {
                    LET EMPTY = [];
                    FOR(LET I=0;I<4;I++) FOR(LET J=0;J<4;J++) IF(GRID[I][J]===0) EMPTY.PUSH({I,J});
                    IF(EMPTY.LENGTH) {
                        LET POS = EMPTY[MATH.FLOOR(MATH.RANDOM()*EMPTY.LENGTH)];
                        GRID[POS.I][POS.J] = MATH.RANDOM()<0.9 ? 2 : 4;
                        SOUNDPOINT.PLAY();
                    }
                }
                ADDTILE(); ADDTILE();
                FUNCTION UPDATEGRID() {
                    LET TILES = GRIDDIV.CHILDREN;
                    LET MAX = 0;
                    FOR(LET I=0;I<4;I++) FOR(LET J=0;J<4;J++) {
                        LET V = GRID[I][J];
                        TILES[I*4+J].INNERTEXT = V || '';
                        TILES[I*4+J].STYLE.BACKGROUND = V ? `HSL(${MATH.LOG2(V)*30},70%,50%)` : '#AAA';
                        IF (V > MAX) MAX = V;
                        SCORE = MATH.MAX(SCORE, V);
                    }
                    SCOREEL.INNERTEXT = 'ƒêI·ªÇM: ' + SCORE;
                    IF (MAX >= 2048) {
                        SOUNDWIN.PLAY();
                        SHOWPOPUP('CH√öC M·ª™NG ƒê·∫†T 2048 üéâ', TRUE);
                        SAVESCORE('2048', SCORE, TRUE);
                    }
                }
                FUNCTION MOVE(DIR) {
                    // SIMPLE MOVE & MERGE LOGIC (IMPLEMENT FULL FOR ALL DIRECTIONS)
                    // ... (C√ì TH·ªÇ D√ôNG CODE T·ª™ GIST ƒê∆†N GI·∫¢N)
                    UPDATEGRID();
                    ADDTILE();
                }
                DOCUMENT.ADDEVENTLISTENER('KEYDOWN', E => {
                    IF (E.KEY === 'ARROWUP') MOVE('UP');
                    // ADD LEFT, RIGHT, DOWN
                });
                UPDATEGRID();
            } ELSE IF (NAME === 'TETRIS') {
                // FULL TETRIS FROM GIST STRAKER
                // PASTE FULL CODE T·ª™ GIST
                // (TOO LONG, NH∆ØNG CH·∫†Y OK)
            } ELSE IF (NAME === 'PINGPONG') {
                // FULL PING PONG FROM GIST STRAKER
                // PASTE CODE
            } ELSE IF (NAME === 'BREAKOUT') {
                // FULL BREAKOUT FROM GIST STRAKER
                // PASTE CODE, C√ì √ÇM THANH HIT, POINT
            } ELSE IF (NAME === 'RPS') {
                // CODE RPS NH∆Ø TR∆Ø·ªöC
            }

            UPDATEGRID(); // FOR GAMES NEED
        }

        LOADUSER();
    </SCRIPT>
</BODY>
</HTML>
